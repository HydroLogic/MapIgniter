
==== Installing MapIgniter ====

=== Virtual Machine Cenario ===

Some of the instructions described in this scenario may be used for other scenarios such as a personal computer installed with Ubuntu.

The following paths described below are not mandatory.

== Part 1 (optional): Install the operating system ==

1. Download **Ubuntu Server** from http://www.ubuntu.com/download/server

2. Create virtual machine in VirtualBox (give at least 1Gb RAM) and set the downloaded image in the optical drive virtual machine configuration

3. Enable PAE in the configuration: System => Processor Virtual Machine => check PAE

4. Start the machine and install Ubuntu Server. In this scenario we have selected the packages LAMP, and PostgreSQL. The created user **miadmin** with **miadmin** password.

5. When the installation finishes, restart the virtual machine

6. Enter the login

== Part 2 (optional): Installing and configuring the system requirements software ==

7. To install **MapServer** and **PostGIS** run the following commands:
<code>
sudo apt-get update
sudo apt-get install python-software-properties
sudo add-apt-repository ppa:gwibber-daily/ppa
sudo apt-get update
sudo apt-get install cgi-mapserver
sudo apt-get install postgresql-9.1-postgis
sudo apt-get install php5-pgsql
sudo apt-get install php5-curl
sudo apt-get install php5-gd
</code>

8. To set the password //postgres// for the postgres user run:
<code>
sudo -u postgres psql template1
\password postgres
\q
</code>

== Part 3: Install MapIgniter ==

9. To create the database **mapigniter** (application database) run the following commands:
<code>
sudo su postgres
createdb -U postgres -E UTF8 mapigniter
createlang -d mapigniter plpgsql
psql -U postgres -d mapigniter -f /usr/share/postgresql/9.1/contrib/postgis-1.5/postgis.sql
psql -U postgres -d mapigniter -f /usr/share/postgresql/9.1/contrib/postgis-1.5/spatial_ref_sys.sql
exit
</code>

10. Repeat step 9 to create the database **mapigniterdata** (user data)

11. Activate Apache **mod_rewrite**
<code>
sudo a2enmod rewrite
sudo service apache2 restart
</code>
Make sure that in the configuration file /etc/apache2/sites-available/default give Options or All to allow .htaccess override **AllowOverride**:
<code>
...
AllowOverride All
...
</code>

The MapIgniter is an application that runs on top of CodeIgniter. First install CodeIgniter.

12. To install **CodeIgniter** run the following commands:
<code>
cd ~
wget -O codeigniter.zip http://codeigniter.com/download.php
sudo apt-get install unzip
unzip codeigniter.zip
mv CodeIgniter_2.1.2 mapigniter
rm codeigniter.zip
</code>

13. To install **MapIgniter** run the following (please check which the exact file name, in this case the version is **1.0.279**):
<code>
cd ~
wget marcoafonso.pt/mapigniter/mapigniter-1.0.279.tar.gz
tar -zxvf mapigniter-1.0.279.tar.gz
rm mapigniter-1.0.279.tar.gz
</code>

14. The **application** folder should be moved to their place:
<code>
rm -R mapigniter/application
mv mapigniter-1.0.279/application mapigniter
</code>

15. The **web** folder should be moved to /var/www, as the **index.dist.php** and **htaccess.dist**:
<code>
sudo mv mapigniter-1.0.279/web /var/www
sudo mv mapigniter-1.0.279/index.dist.php /var/www
sudo mv mapigniter-1.0.279/htaccess.dist /var/www/.htaccess
sudo mv /var/www/index.html /var/www/_index.html
</code>

16. To configure **MapIgniter** start to copy the distribution files. Contains configuration for this installation.
<code>
cd ~
sudo mv /var/www/index.dist.php /var/www/index.php
mv mapigniter/application/config/config.dist.php mapigniter/application/config/config.php
mv mapigniter/application/config/database.dist.php mapigniter/application/config/database.php
</code>

17. Create the **data** folders and give write permissions to the user **www-data**:
<code>
cd ~
mv mapigniter-1.0.279/data.dist mapigniter/data
sudo chown -R www-data mapigniter/data
sudo mkdir /var/www/web/data
sudo mkdir /var/www/web/data/tmp
sudo chown -R www-data /var/www/web/data
</code>

18. See what is the IP of the virtual machine and open the browser http://ip-virtual-machine
If everything is correct should appear MapIgniter - System Requirements.

19. If there are problems, click Reinstall.
If the installation goes well, click to go to the homepage.

20. To enter the administration area, click **Login** and enter your user name **admin** and password **admin**

Please report any problems to mafonso333 [at] gmail.com

TODO: create a list for MapIgniter support.